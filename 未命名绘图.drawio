<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36" version="29.5.6">
  <diagram name="第 1 页" id="GKHndDmi5vlL1_VRalfk">
    <mxGraphModel dx="946" dy="610" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="UfUiGCJygnWf0iFvSy39-12" parent="1" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" value="破坏双亲委派模型的几种场景" vertex="1">
          <mxGeometry height="420" width="410" x="480" y="670" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-8" parent="1" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;" value="双亲委派模型" vertex="1">
          <mxGeometry height="500" width="440" x="399.5" y="95" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-3" edge="1" parent="1" source="8njmXwVHh8kMA4B01bRU-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="8njmXwVHh8kMA4B01bRU-2" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-1" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="加载" vertex="1">
          <mxGeometry height="60" width="120" x="220" y="130" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-5" edge="1" parent="1" source="8njmXwVHh8kMA4B01bRU-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="8njmXwVHh8kMA4B01bRU-4" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-2" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="验证&amp;nbsp;" vertex="1">
          <mxGeometry height="60" width="120" x="220" y="230" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-7" edge="1" parent="1" source="8njmXwVHh8kMA4B01bRU-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="8njmXwVHh8kMA4B01bRU-6" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-4" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="准备" vertex="1">
          <mxGeometry height="60" width="120" x="220" y="340" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-9" edge="1" parent="1" source="8njmXwVHh8kMA4B01bRU-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="8njmXwVHh8kMA4B01bRU-8" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-6" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="解析" vertex="1">
          <mxGeometry height="60" width="120" x="220" y="450" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-15" edge="1" parent="1" source="8njmXwVHh8kMA4B01bRU-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="UfUiGCJygnWf0iFvSy39-14" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-8" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="初始化" vertex="1">
          <mxGeometry height="60" width="120" x="220" y="560" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-11" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="启动类加载器&lt;div&gt;Bootstrap ClassLoader&lt;/div&gt;&lt;div&gt;&amp;lt;JAVA_HOME&amp;gt;/lib&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="201" x="519" y="150" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-1" edge="1" parent="1" source="8njmXwVHh8kMA4B01bRU-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" target="8njmXwVHh8kMA4B01bRU-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-12" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="扩展类加载器&lt;div&gt;Extension ClassLoader&lt;/div&gt;&lt;div&gt;&amp;lt;JAVA_HOME&amp;gt;/lib/ext&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="201" x="519" y="250" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-2" edge="1" parent="1" source="8njmXwVHh8kMA4B01bRU-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" target="8njmXwVHh8kMA4B01bRU-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-13" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="系统类加载器&lt;div&gt;Application&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;ClassLoader&lt;/span&gt;&lt;/div&gt;&lt;div&gt;ClassPath&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="201" x="519" y="350" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-15" parent="1" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;fontColor=#000000;darkOpacity=0.05;fillColor=#FFF9B2;strokeColor=none;fillStyle=solid;direction=west;gradientDirection=north;gradientColor=#FFF2A1;shadow=1;size=20;pointerEvents=1;" value="&lt;article data-content=&quot;[{&amp;quot;type&amp;quot;:&amp;quot;block&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;B2jv-1771046455341&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;paragraph&amp;quot;,&amp;quot;data&amp;quot;:{&amp;quot;style&amp;quot;:{&amp;quot;color&amp;quot;:&amp;quot;#1f2328&amp;quot;,&amp;quot;fontSize&amp;quot;:16}},&amp;quot;nodes&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;text&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;wsHb-1771046455342&amp;quot;,&amp;quot;leaves&amp;quot;:[{&amp;quot;text&amp;quot;:&amp;quot;启动类加载器：用C++语言实现，是虚拟机自身的一部分，它负责将&amp;nbsp;&amp;lt;JAVA_HOME&amp;gt;/lib路径下的核心类库，无法被Java程序直接引用&amp;quot;,&amp;quot;marks&amp;quot;:[]}]}],&amp;quot;state&amp;quot;:{}},{&amp;quot;type&amp;quot;:&amp;quot;block&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;cYQ8-1771051115265&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;paragraph&amp;quot;,&amp;quot;data&amp;quot;:{&amp;quot;style&amp;quot;:{&amp;quot;color&amp;quot;:&amp;quot;#1f2328&amp;quot;,&amp;quot;fontSize&amp;quot;:16},&amp;quot;version&amp;quot;:1},&amp;quot;nodes&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;text&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;igLF-1771051115264&amp;quot;,&amp;quot;leaves&amp;quot;:[{&amp;quot;text&amp;quot;:&amp;quot;扩展类加载器：用Java语言实现，它负责加载&amp;lt;JAVA_HOME&amp;gt;/lib/ext目录下或者由系统变量-Djava.ext.dir指定位路径中的类库，开发者可以直接使用&amp;quot;,&amp;quot;marks&amp;quot;:[]}]}],&amp;quot;state&amp;quot;:{}},{&amp;quot;type&amp;quot;:&amp;quot;block&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;eyKx-1771051115267&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;paragraph&amp;quot;,&amp;quot;data&amp;quot;:{&amp;quot;style&amp;quot;:{&amp;quot;color&amp;quot;:&amp;quot;#1f2328&amp;quot;,&amp;quot;fontSize&amp;quot;:16},&amp;quot;version&amp;quot;:1},&amp;quot;nodes&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;text&amp;quot;,&amp;quot;id&amp;quot;:&amp;quot;hCmu-1771051115266&amp;quot;,&amp;quot;leaves&amp;quot;:[{&amp;quot;text&amp;quot;:&amp;quot;系统类加载器：用Java语言实现，它负责加载系统类路径ClassPath指定路径下的类库，开发者可以直接使用&amp;quot;,&amp;quot;marks&amp;quot;:[]}]}],&amp;quot;state&amp;quot;:{}}]&quot;&gt;&lt;div style=&quot;white-space-collapse: preserve; line-height: 1.75; font-size: 16px; text-align: left; color: rgb(31, 35, 40);&quot;&gt;启动类加载器：用C++语言实现，是虚拟机自身的一部分，它负责将 /lib路径下的核心类库，无法被Java程序直接引用&lt;/div&gt;&lt;div style=&quot;white-space-collapse: preserve; line-height: 1.75; font-size: 16px; text-align: left; color: rgb(31, 35, 40);&quot;&gt;扩展类加载器：用Java语言实现，它负责加载/lib/ext目录下或者由系统变量-Djava.ext.dir指定位路径中的类库，开发者可以直接使用&lt;/div&gt;&lt;div style=&quot;text-align: left; white-space-collapse: preserve; line-height: 1.75; font-size: 16px; color: rgb(31, 35, 40);&quot;&gt;系统类加载器：用Java语言实现，它负责加载系统类路径ClassPath指定路径下的类库，开发者可以直接使用&lt;/div&gt;&lt;/article&gt;" vertex="1">
          <mxGeometry height="130" width="990" x="850" y="110" as="geometry" />
        </mxCell>
        <mxCell id="8njmXwVHh8kMA4B01bRU-16" parent="1" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;fontColor=#000000;darkOpacity=0.05;fillColor=#FFF9B2;strokeColor=none;fillStyle=solid;direction=west;gradientDirection=north;gradientColor=#FFF2A1;shadow=1;size=20;pointerEvents=1;verticalAlign=top;align=left;" value="双亲委派：&lt;span&gt;&lt;span style=&quot;font-size: inherit; white-space-collapse: preserve; color: rgb(31, 35, 40); font-family: Arial;&quot;&gt;如果父类加载器可以完成类加载任务，就成功返回，倘若父类加载器无法完成此加载任务，子加载器才会尝试自己去加载，这就是&lt;/span&gt;&lt;span style=&quot;font-size: inherit; white-space-collapse: preserve; font-weight: bold; color: rgb(31, 35, 40); font-family: Arial;&quot;&gt;双亲委派模式&lt;/span&gt;&lt;span style=&quot;font-size: inherit; white-space-collapse: preserve; color: rgb(31, 35, 40); font-family: Arial;&quot;&gt;。&lt;/span&gt;&lt;/span&gt;&lt;div&gt;&lt;font color=&quot;#1f2328&quot; face=&quot;Arial&quot;&gt;&lt;span style=&quot;white-space-collapse: preserve;&quot;&gt;优点：&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(31, 35, 40); font-family: Arial; font-size: inherit; white-space-collapse: preserve;&quot;&gt;采用双亲委派模式的是好处是Java类随着它的类加载器一起具备了一种带有优先级的层次关系，通过这种层级关可以避免类的重复加载，当父亲已经加载了该类时，就没有必要子ClassLoader再加载一次。其次防止恶意覆盖Java核心API。&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="110" width="870" x="870" y="290" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-6" edge="1" parent="1" source="UfUiGCJygnWf0iFvSy39-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" target="8njmXwVHh8kMA4B01bRU-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-3" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="自定义类加载器&lt;div&gt;Use ClassLoader&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="120" x="450" y="470" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-7" edge="1" parent="1" source="UfUiGCJygnWf0iFvSy39-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="620" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-5" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="自定义类加载器&lt;div&gt;Use ClassLoader&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="120" x="670" y="470" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-9" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="1. 重写loadClass()方法，破坏了双亲委派；&lt;div&gt;2. 重写findClass()方法，依然遵循双亲委派；&lt;/div&gt;" vertex="1">
          <mxGeometry height="90" width="260" x="560" y="710" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-10" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="ClassPath目录下JNDI接口提供者（SPI），使用线程上下文类加载器Thread Context ClassLoader" vertex="1">
          <mxGeometry height="90" width="260" x="560" y="850" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-11" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="热替换，热部署，如OSGI" vertex="1">
          <mxGeometry height="80" width="260" x="555" y="990" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-13" parent="1" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;fontColor=#000000;darkOpacity=0.05;fillColor=#FFF9B2;strokeColor=none;fillStyle=solid;direction=west;gradientDirection=north;gradientColor=#FFF2A1;shadow=1;size=20;pointerEvents=1;" value="能通过程序改变的只有：字节码生成和类加载器" vertex="1">
          <mxGeometry height="80" width="310" x="1030" y="610" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-17" edge="1" parent="1" source="UfUiGCJygnWf0iFvSy39-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="UfUiGCJygnWf0iFvSy39-16" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-14" parent="1" style="whiteSpace=wrap;html=1;rounded=0;" value="使用" vertex="1">
          <mxGeometry height="60" width="120" x="220" y="660" as="geometry" />
        </mxCell>
        <mxCell id="UfUiGCJygnWf0iFvSy39-16" parent="1" style="whiteSpace=wrap;html=1;rounded=0;" value="卸载" vertex="1">
          <mxGeometry height="60" width="120" x="220" y="770" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
